<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuesioner Evaluasi UI/UX - SARAF KOPI</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;500;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Menggunakan palette hijau berdasarkan #346E41
                        saraf: {
                            50: '#f2f9f4',
                            100: '#e1efe5',
                            200: '#c3dec9',
                            300: '#96c2a0',
                            400: '#629f71',
                            500: '#4a8a56',
                            600: '#346E41', // Warna Utama (Primary)
                            700: '#2a5836',
                            800: '#23462d',
                            900: '#1d3a26',
                        }
                    },
                    fontFamily: {
                        sans: ['DM Sans', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #f2f9f4; /* Hijau pudar 50 */
            background-image: radial-gradient(#96c2a0 1px, transparent 1px);
            background-size: 24px 24px;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(52, 110, 65, 0.2); /* Border hijau tipis */
            box-shadow: 0 10px 40px -10px rgba(35, 70, 45, 0.15);
        }

        /* Custom Radio Button for Likert Scale */
        .likert-input:checked + label {
            background-color: #346E41; /* Hijau Utama */
            color: white;
            border-color: #346E41;
            transform: scale(1.1);
            box-shadow: 0 4px 6px -1px rgba(52, 110, 65, 0.3);
        }

        .likert-label {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Smooth appearing animation */
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Focus styles for validation visibility */
        input:invalid, select:invalid, textarea:invalid {
            border-color: #e5e7eb; /* Default border */
        }
        
        /* Highlight border red ONLY when user interacts/focuses and leaves it invalid is handled by browser, 
           but we can style required indicators */
        .required-marker {
            color: #ef4444;
            margin-left: 2px;
        }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }

        /* Loader Spinner */
        .loader {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #346E41;
            width: 20px;
            height: 20px;
            -webkit-animation: spin 1s linear infinite; /* Safari */
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-700 font-sans selection:bg-saraf-200 selection:text-saraf-900 pb-20">

    <!-- Header Section -->
    <header class="relative w-full bg-saraf-800 text-saraf-50 py-16 px-6 text-center overflow-hidden shadow-xl rounded-b-[3rem]">
        <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
            <!-- Abstract leaf/nature shapes -->
            <div class="absolute top-10 left-10 w-24 h-24 rounded-full border-4 border-white opacity-50"></div>
            <div class="absolute bottom-10 right-10 w-48 h-48 rounded-full border-2 border-white opacity-30"></div>
            <div class="absolute top-1/2 left-1/4 w-8 h-8 rounded-full bg-white opacity-20"></div>
        </div>
        
        <div class="relative z-10 max-w-3xl mx-auto fade-in-up">
            <div class="inline-block px-4 py-1 mb-4 border border-saraf-400 rounded-full text-xs font-bold tracking-widest uppercase text-saraf-200">
                Project IMK
            </div>
            <h1 class="font-serif text-4xl md:text-5xl font-bold mb-4 tracking-tight">SARAF KOPI</h1>
            <h2 class="text-xl md:text-2xl text-saraf-200 font-light mb-6">Evaluasi UI/UX Prototype</h2>
            <p class="text-sm md:text-base text-saraf-100 leading-relaxed max-w-2xl mx-auto opacity-90">
                Bantu kami tumbuh dengan memberikan ulasan terbaik Anda. <br>Setiap masukan sangat berarti bagi perkembangan kami.
            </p>
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-4 -mt-10 relative z-20">
        
        <form id="kuesionerForm" onsubmit="handleSubmit(event)">
            
            <!-- Intro Card -->
            <section class="glass-card rounded-3xl p-6 md:p-8 mb-6 fade-in-up delay-100">
                <div class="prose prose-saraf max-w-none text-sm md:text-base">
                    <p class="mb-4">
                        <strong>Halo! ðŸ‘‹</strong><br>
                        Kuesioner ini bertujuan untuk mengevaluasi UI/UX aplikasi <strong>"SARAF KOPI"</strong>. Mohon isi seluruh pertanyaan agar form dapat dikirim.
                    </p>
                    <div class="bg-saraf-50 border-l-4 border-saraf-600 p-4 rounded-r-lg mb-4">
                        <h4 class="font-bold text-saraf-800 text-sm uppercase mb-1">Penting</h4>
                        <p class="text-sm">Semua kolom bertanda bintang (<span class="text-red-500">*</span>) atau pertanyaan <strong>wajib diisi</strong>.</p>
                    </div>
                </div>
            </section>

            <!-- Identitas Responden -->
            <section class="glass-card rounded-3xl p-6 md:p-8 mb-6 fade-in-up delay-200 border-t-4 border-saraf-600">
                <h3 class="font-serif text-2xl text-saraf-800 mb-6 flex items-center">
                    <span class="bg-saraf-100 text-saraf-800 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3">1</span>
                    Identitas Responden
                </h3>

                <div class="space-y-6">
                    <!-- Gender -->
                    <div>
                        <label class="block text-sm font-bold text-saraf-900 mb-2">Jenis Kelamin<span class="required-marker">*</span></label>
                        <div class="flex gap-4">
                            <label class="flex items-center cursor-pointer bg-white px-4 py-2 rounded-lg border border-gray-200 hover:border-saraf-500 hover:bg-saraf-50 transition w-full sm:w-auto">
                                <input type="radio" name="gender" value="Laki-laki" class="accent-saraf-600 mr-2" required> Laki-laki
                            </label>
                            <label class="flex items-center cursor-pointer bg-white px-4 py-2 rounded-lg border border-gray-200 hover:border-saraf-500 hover:bg-saraf-50 transition w-full sm:w-auto">
                                <input type="radio" name="gender" value="Perempuan" class="accent-saraf-600 mr-2" required> Perempuan
                            </label>
                        </div>
                    </div>

                    <!-- Latar Belakang -->
                    <div>
                        <label class="block text-sm font-bold text-saraf-900 mb-2">Latar Belakang<span class="required-marker">*</span></label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <label class="flex items-center cursor-pointer bg-white px-4 py-3 rounded-lg border border-gray-200 hover:border-saraf-500 hover:bg-saraf-50 transition">
                                <input type="radio" name="background" value="Mahasiswa" class="accent-saraf-600 mr-2" required> Mahasiswa
                            </label>
                            <label class="flex items-center cursor-pointer bg-white px-4 py-3 rounded-lg border border-gray-200 hover:border-saraf-500 hover:bg-saraf-50 transition">
                                <input type="radio" name="background" value="Pekerja" class="accent-saraf-600 mr-2" required> Pekerja
                            </label>
                            <label class="flex items-center cursor-pointer bg-white px-4 py-3 rounded-lg border border-gray-200 hover:border-saraf-500 hover:bg-saraf-50 transition">
                                <input type="radio" name="background" value="Wirausaha" class="accent-saraf-600 mr-2" required> Wirausaha
                            </label>
                            <div class="relative">
                                <input type="radio" name="background" value="Other" class="peer absolute left-4 top-4 accent-saraf-600" required>
                                <input type="text" name="background_other" placeholder="Lainnya..." class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-200 focus:border-saraf-600 focus:ring-1 focus:ring-saraf-600 outline-none transition bg-white peer-checked:border-saraf-600 peer-checked:bg-saraf-50" oninput="document.querySelector('input[name=background][value=Other]').checked = true">
                            </div>
                        </div>
                    </div>

                    <!-- Usia -->
                    <div>
                        <label class="block text-sm font-bold text-saraf-900 mb-2">Usia/Umur<span class="required-marker">*</span></label>
                        <div class="relative">
                            <!-- ADDED name="age" HERE -->
                            <select name="age" class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-saraf-600 focus:ring-1 focus:ring-saraf-600 outline-none bg-white appearance-none cursor-pointer hover:border-saraf-400" required>
                                <option value="" disabled selected>Pilih rentang usia...</option>
                                <option value="<18">Kurang dari 18 Tahun</option>
                                <option value="18-24">18 - 24 Tahun</option>
                                <option value="25-34">25 - 34 Tahun</option>
                                <option value=">34">Lebih dari 34 Tahun</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-saraf-600">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- LIKERT SECTIONS -->
            <script>
                function createLikertSection(number, title, subtitle, questions, idPrefix) {
                    let html = `
                    <section class="glass-card rounded-3xl p-6 md:p-8 mb-6 fade-in-up border-t-4 border-saraf-600">
                        <h3 class="font-serif text-2xl text-saraf-800 mb-1 flex items-center">
                            <span class="bg-saraf-100 text-saraf-800 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3">${number}</span>
                            ${title}
                        </h3>
                        <p class="text-sm text-saraf-600 mb-8 italic ml-11">${subtitle}</p>
                        <div class="space-y-8">
                    `;
                    
                    questions.forEach((q, index) => {
                        html += `
                        <div class="bg-white/60 p-5 rounded-xl border border-saraf-100 hover:border-saraf-300 transition-colors duration-300">
                            <p class="text-saraf-900 font-medium mb-4 flex">
                                <span class="text-saraf-400 mr-2 text-sm">${index + 1}.</span>
                                ${q} <span class="required-marker">*</span>
                            </p>
                            <div class="flex justify-between items-center max-w-md mx-auto relative">
                                <!-- Track line -->
                                <div class="absolute top-1/2 left-0 w-full h-0.5 bg-saraf-100 -z-10 hidden sm:block"></div>
                                
                                <span class="text-xs text-saraf-500 font-bold hidden sm:block w-12 text-center">STS</span>
                                <div class="flex gap-2 sm:gap-4 flex-1 justify-center bg-white/50 sm:bg-transparent py-2 rounded-full">
                        `;
                        
                        for(let i=1; i<=5; i++) {
                            html += `
                                <div class="flex flex-col items-center group">
                                    <input type="radio" name="${idPrefix}_q${index}" id="${idPrefix}_q${index}_${i}" value="${i}" class="likert-input hidden" required>
                                    <label for="${idPrefix}_q${index}_${i}" class="likert-label w-9 h-9 sm:w-11 sm:h-11 rounded-full border-2 border-saraf-200 bg-white flex items-center justify-center cursor-pointer text-saraf-600 font-bold text-sm sm:text-lg hover:border-saraf-500 hover:text-saraf-700 shadow-sm">
                                        ${i}
                                    </label>
                                </div>
                            `;
                        }

                        html += `
                                </div>
                                <span class="text-xs text-saraf-500 font-bold hidden sm:block w-12 text-center">SS</span>
                            </div>
                            <div class="flex justify-between mt-2 sm:hidden px-2">
                                <span class="text-[10px] text-saraf-500">Sangat Tdk Setuju</span>
                                <span class="text-[10px] text-saraf-500">Sangat Setuju</span>
                            </div>
                        </div>
                        `;
                    });

                    html += `</div></section>`;
                    document.write(html);
                }
            </script>

            <!-- Aspek Kognisi -->
            <script>
                createLikertSection(2, "Aspek Kognisi", 
                    "Menilai pemahaman pengguna terhadap struktur, fitur, dan cara kerja prototype.", 
                    [
                        "Saya dapat memahami tujuan aplikasi ini sejak pertama kali melihat tampilan awal.",
                        "Saya memahami fungsi setiap menu utama pada prototype aplikasi.",
                        "Ikon, label, dan teks pada prototype mudah dipahami.",
                        "Saya dapat mengetahui langkah yang harus dilakukan untuk melakukan pembelian produk.",
                        "Saya tidak membutuhkan penjelasan tambahan untuk memahami cara menggunakan prototype ini."
                    ], "cog");
            </script>

            <!-- Aspek Persepsi -->
            <script>
                createLikertSection(3, "Aspek Persepsi", 
                    "Menilai penilaian subjektif pengguna terhadap tampilan visual dan kenyamanan.", 
                    [
                        "Tampilan visual prototype terlihat rapi dan konsisten.",
                        "Kombinasi warna dan tata letak elemen terasa nyaman dilihat.",
                        "Desain antarmuka prototype terlihat menarik untuk sebuah aplikasi e-commerce.",
                        "Ukuran teks, tombol, dan elemen visual mudah dibaca dan dikenali.",
                        "Secara keseluruhan, prototype ini memberikan kesan yang positif."
                    ], "per");
            </script>

            <!-- Aspek Perilaku -->
            <script>
                createLikertSection(4, "Aspek Perilaku", 
                    "Menilai interaksi nyata pengguna saat mencoba prototype.", 
                    [
                        "Alur navigasi antar halaman terasa jelas dan tidak membingungkan.",
                        "Saya dapat berpindah dari satu halaman ke halaman lain dengan lancar.",
                        "Proses mencari produk hingga ke tahap checkout terasa runtut.",
                        "Saya dapat menyelesaikan tugas (misalnya memilih produk) tanpa hambatan berarti.",
                        "Saya tidak merasa ingin keluar dari aplikasi sebelum menyelesaikan aktivitas yang saya lakukan."
                    ], "beh");
            </script>

            <!-- Aspek Kepuasan -->
            <script>
                createLikertSection(5, "Aspek Kepuasan", 
                    "Mengukur kepuasan keseluruhan sebagai indikator keberhasilan UX.", 
                    [
                        "Prototype ini mudah digunakan secara keseluruhan.",
                        "Saya merasa nyaman saat berinteraksi dengan prototype aplikasi.",
                        "Jika aplikasi ini dikembangkan lebih lanjut, saya tertarik untuk menggunakannya."
                    ], "sat");
            </script>

            <!-- Pertanyaan Terbuka -->
            <section class="glass-card rounded-3xl p-6 md:p-8 mb-6 fade-in-up border-t-4 border-saraf-600">
                <h3 class="font-serif text-2xl text-saraf-800 mb-6 flex items-center">
                    <span class="bg-saraf-100 text-saraf-800 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3">6</span>
                    Feedback & Saran
                </h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-saraf-900 font-medium mb-2">
                            Bagian apa dari prototype yang menurut Anda paling mudah digunakan? <span class="required-marker">*</span>
                        </label>
                        <textarea name="feedback_easy" required rows="3" placeholder="Jawaban Anda..." class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-saraf-600 focus:ring-1 focus:ring-saraf-600 outline-none bg-white transition resize-none"></textarea>
                    </div>
                    <div>
                        <label class="block text-saraf-900 font-medium mb-2">
                            Bagian apa yang menurut Anda masih membingungkan atau kurang jelas? <span class="required-marker">*</span>
                        </label>
                        <textarea name="feedback_confusing" required rows="3" placeholder="Jawaban Anda..." class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-saraf-600 focus:ring-1 focus:ring-saraf-600 outline-none bg-white transition resize-none"></textarea>
                    </div>
                    <div>
                        <label class="block text-saraf-900 font-medium mb-2">
                            Saran Anda untuk meningkatkan UI/UX pada prototype aplikasi ini! <span class="required-marker">*</span>
                        </label>
                        <textarea name="feedback_suggestion" required rows="3" placeholder="Jawaban Anda..." class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-saraf-600 focus:ring-1 focus:ring-saraf-600 outline-none bg-white transition resize-none"></textarea>
                    </div>
                </div>
            </section>

            <!-- Submit Button -->
            <div class="text-center pb-12 fade-in-up">
                <button type="submit" id="submitBtn" class="bg-saraf-600 text-white font-serif font-bold text-lg px-12 py-4 rounded-full shadow-lg hover:bg-saraf-700 hover:shadow-saraf-200/50 hover:-translate-y-1 transition transform duration-200 w-full md:w-auto flex items-center justify-center mx-auto gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none">
                    <span id="btnText">Kirim Evaluasi</span>
                    <div id="btnLoader" class="loader hidden"></div>
                    <svg id="btnIcon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </button>
            </div>

        </form>
    </main>

    <footer class="text-center text-saraf-500 text-sm py-6 opacity-70">
        &copy; 2024 SARAF KOPI Research Team. All rights reserved.
    </footer>

    <!-- Custom Modal for Success -->
    <div id="successModal" class="fixed inset-0 z-50 flex items-center justify-center px-4 opacity-0 pointer-events-none transition-opacity duration-300">
        <div class="absolute inset-0 bg-saraf-900/60 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full relative z-10 text-center shadow-2xl transform scale-95 transition-transform duration-300" id="modalContent">
            <div class="w-20 h-20 bg-saraf-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                <svg class="w-10 h-10 text-saraf-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h3 class="font-serif text-2xl font-bold text-saraf-800 mb-2">Terima Kasih!</h3>
            <p class="text-gray-600 mb-6">Masukan Anda telah berhasil disimpan. Terima kasih telah membantu pengembangan SARAF KOPI.</p>
            <button onclick="closeModal()" class="bg-saraf-600 text-white px-6 py-2 rounded-lg hover:bg-saraf-700 transition w-full font-bold shadow-md">Tutup</button>
        </div>
    </div>

    <!-- Error/Validation Modal (Optional simpler alert) -->

    <script>
        // --- KONFIGURASI ---
        // Ganti URL ini dengan Web App URL dari Google Apps Script Anda
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyma9j7dMTkYguhh2nT5FQlt3qbHiU1C7xsEv30egtZj0rspUvn9pVKMiNbmokeB-4L/exec'; 

        function handleSubmit(e) {
            e.preventDefault();
            const form = e.target;
            
            // 1. Validasi Form
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            // 2. Tampilkan Loading State
            const btn = document.getElementById('submitBtn');
            const btnText = document.getElementById('btnText');
            const btnLoader = document.getElementById('btnLoader');
            const btnIcon = document.getElementById('btnIcon');

            const originalText = btnText.innerText;
            
            btn.disabled = true;
            btnText.innerText = "Mengirim...";
            btnLoader.classList.remove('hidden');
            btnIcon.classList.add('hidden');

            // 3. Persiapkan Data
            const formData = new FormData(form);

            // 4. Kirim ke Google Sheets
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                body: formData
            })
            .then(response => {
                // Tampilkan Modal Sukses
                showSuccessModal();
                // Reset Form
                form.reset();
            })
            .catch(error => {
                console.error('Error!', error.message);
                alert("Maaf, terjadi kesalahan saat mengirim data. Silakan coba lagi.");
            })
            .finally(() => {
                // 5. Kembalikan Tombol ke Semula
                btn.disabled = false;
                btnText.innerText = originalText;
                btnLoader.classList.add('hidden');
                btnIcon.classList.remove('hidden');
            });
        }

        function showSuccessModal() {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('modalContent');
            
            modal.classList.remove('opacity-0', 'pointer-events-none');
            content.classList.remove('scale-95');
            content.classList.add('scale-100');
        }

        function closeModal() {
            const modal = document.getElementById('successModal');
            const content = document.getElementById('modalContent');
            
            modal.classList.add('opacity-0', 'pointer-events-none');
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
        }
    </script>
</body>
</html>
